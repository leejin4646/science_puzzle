<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>가로세로 퍼즐 (최종 완성)</title>
<style>
    body {
        font-family:'Nanum Gothic',sans-serif;
        text-align:center;
        background: url('https://search.pstatic.net/common/?src=http%3A%2F%2Fblogfiles.naver.net%2FMjAxNzA5MDZfMyAg%2FMDAxNTA0NjU4MDg5MzYz.k_xvYKxGAe4D_fCtiMGCX-PLesGOkLUVM7HFrvGT5EQg.m1ipd6amBQKk1inByv0mpl-8lrww11uuyAgxoa8Wfd0g.JPEG.oasisman8%2F1.jpg&type=sc960_832') no-repeat center center fixed;
        background-size: cover;
        margin: 0;
    }
    body::before {
        content: '';
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.3);
        z-index: -1;
    }
    h1 {margin:15px;font-size:1.8rem;color:#fff;text-shadow:1px 1px 3px rgba(0,0,0,0.8);}
    .score {font-size:1.2rem;margin-bottom:15px;color:#fff;}
    .puzzle-container {
        display:grid;
        grid-template-columns: repeat(17, minmax(18px, 1fr));
        gap:2px;
        justify-content:center;
        margin:10px auto;
        width:95vw;
        max-width:680px;
    }
    .cell {
        border:1px solid #444;
        position:relative;
        background:#b0b0b0;
        border-radius:4px;
        aspect-ratio: 1 / 1;
        display:flex;
        justify-content:center;
        align-items:center;
    }
    .white input {
        width:100%;height:100%;
        text-align:center;
        font-size:1em;
        font-weight:bold;
        border:none;
        outline:none;
        background:transparent;
        color:#000;
    }
    .white {background:#fff;}
    .green {background:#4CAF50!important;transition:background 0.4s ease;}
    .green input {background:#4CAF50;color:#fff;font-weight:bold;}
    .number {
        position:absolute;
        top:1px;left:2px;
        font-size:0.55em;
        color:#000;
    }
    .questions {
        max-width:95%;
        margin:10px auto;
        background:rgba(255,255,255,0.95);
        padding:10px;
        border-radius:8px;
        box-shadow:0 2px 8px rgba(0,0,0,0.4);
    }
    .accordion-title {
        background:#4CAF50;color:#fff;padding:8px;
        cursor:pointer;font-weight:bold;text-align:left;
        border-radius:4px;margin-bottom:5px;
    }
    .accordion-content {
        display:none;padding:8px;text-align:left;font-size:14px;
    }
    .solved::after {content:" ✅";color:green;font-weight:bold;}
    @media (max-width:768px){
        .white input{font-size:3.5vw;}
        h1{font-size:1.5rem;}
    }
</style>
</head>
<body>
<h1>5학년 1학기 과학 가로세로 퍼즐</h1>
<div class="score">점수: <span id="score">0</span></div>
<div id="puzzle" class="puzzle-container"></div>

<div class="questions">
    <div class="accordion-title" onclick="toggleAccordion('across')">가로 문제 보기</div>
    <div id="across" class="accordion-content"></div>
    <div class="accordion-title" onclick="toggleAccordion('down')">세로 문제 보기</div>
    <div id="down" class="accordion-content"></div>
</div>

<script>
function toggleAccordion(id){
    const el=document.getElementById(id);
    el.style.display=(el.style.display==='block')?'none':'block';
}

/* ✅ 퍼즐 패턴 */
const pattern=[
"oxoxoxxxxooooooxx","oxoxooooxxoxxoxox","xxoxoxoxooxxoxoox","xooooxxxoxxxoxxxx",
"ooxxxxoxoxoooxoox","xxooxxoxoxoxoxxxo","xoxxoooxxoxxoooxo","ooxxxxxxooxoxxxxo",
"xxxxoooxxoxooxoox","xooxoxxxxoxoxxxxx","ooxxoxooxoxxoooox","xoxxoxoxoxxxoxoxo",
"xooooooxoxxxoxoxo","xoxxoxoxooxxxxxxx","xxxxxxoxxxoxxooxx","ooooxoxxoxoxxxoxx",
"xxoxooxooxxoxxoxx","xxoxxxxxxooooxoxx","xxxxxoooxoxoxxoxx","ooooooxxxxooxxxxx",
"xoxxxoxoooxxxxxxx","xoooxoxxxxxxxxxxx","xxxxxoxxxxxxxxxxx"
];

/* ✅ 최종 좌표 데이터 (네 요구 100% 반영) */
const coords=[
[1,1,1],[2,1,3],[3,4,2],[4,5,1],[5,1,5],[6,1,5],[7,2,7],[8,1,10],[9,1,11],
[10,3,9],[11,3,13],[12,5,11],[13,7,13],[14,2,16],[15,3,15],[16,5,15],[17,6,17],
[18,9,15],[19,8,12],[20,9,12],[21,7,10],[22,8,9],[23,9,5],[24,10,2],[25,11,1],
[26,13,2],[27,11,7],[28,6,3],[29,7,2],[30,8,1],[31,5,7],[32,7,5],[33,12,9],
[34,14,9],[35,15,11],[36,11,13],[37,11,15],[38,12,17],[39,15,14],[40,15,15],
[41,17,12],[42,18,10],[43,20,11],[44,21,8],[45,20,1],[46,20,2],[47,22,2],
[48,19,6],[49,16,3],[50,16,1],[51,16,6],[52,17,5],[53,16,9],[54,17,8],[55,1,14]
];

/* ✅ 정답 */
const answers={1:"탐구",2:"원생생물",3:"대물렌즈",4:"균류",5:"접안렌즈",6:"안전수칙",7:"수온",8:"카시오페이아",9:"시간",10:"포자",
11:"태양계와별",12:"태양",13:"별자리",14:"위성",15:"목성",16:"세포",17:"적외선",18:"온도",19:"회전판",20:"전도",
21:"실체현미경",22:"천체",23:"열변색",24:"용해와용액",25:"용해",26:"용액의진하기",27:"생물",28:"용질",29:"금성",
30:"수성",31:"북극성",32:"소행성",33:"빠르기",34:"기록",35:"가설",36:"자료해석",37:"해왕성",38:"공기",39:"주작",
40:"작은곰자리",41:"온도와열",42:"결론도출",43:"단열",44:"쓰임새",45:"첨단생명과학",46:"단열재",47:"재물대",
48:"광학현미경",49:"인내심",50:"문제인식",51:"행성",52:"토성",53:"체온",54:"기온",55:"이동"};

/* ✅ 문제 출력 */
const across={3:"현미경에서 물체의 상을 확대해주는 렌즈",4:"곰팡이나 버섯 같은 생물",6:"실험하는 동안 ○○○○을 지킵니다.",8:"북극성은 ○○○○○○자리로 찾는다",10:"식물은 씨로, 균류는 ○○로 번식",12:"태양과 그 영향권의 천체",13:"별의 무리를 구분해 이름 붙인 것",15:"태양계에서 가장 큰 행성",16:"균류보다 작은 생물",18:"물질의 차갑거나 따뜻한 정도",20:"고체에서 열이 높은 곳에서 낮은 곳으로 이동",22:"우주에 있는 모든 물체",23:"색이 변하는 ○○○ 물감",24:"녹이는 물질",25:"물질이 녹아 섞이는 현상",26:"용질의 많고 적음",27:"“다양한 ○○과 우리생활”",28:"녹는 물질",30:"태양에 가장 가까운 행성",32:"태양계는 태양, 행성, ○○○로 구성",34:"빠짐없이 ○○합니다.",36:"자료의 뜻을 풀어내는 것",39:"어떤 일을 진짜인 것처럼 꾸며내는 것",42:"실험결과에서 결론 도출",43:"열의 이동 줄이는 것",44:"○○○에 맞는 온도계 사용",45:"과학 기술로 문제 해결",47:"현미경에서 관찰대상 올려놓는 곳",48:"태양빛으로 ○○○",50:"궁금한 점 명확히 나타내는 것",52:"큰 고리가 있는 행성",54:"공기의 온도"};
const down={1:"1단원 제목은 과학자처럼 ○○하기",2:"짚신벌레와 해캄 같은 ○○○○",3:"가열된 물질이 위로 올라가는 과정",5:"현미경에서 눈으로 보는 렌즈",7:"물의 온도",9:"한 번 사용하면 되돌릴 수 없는 것",10:"붙였다 떼는 종이",11:"별자리가 나오는 단원 제목",12:"스스로 빛을 내는 천체",14:"행성의 주위를 도는 천체",17:"○○○온도계 사용",19:"대물렌즈 배율 조절",21:"물체를 확대해 보는 도구",23:"열을 감지해 색깔로 나타내는 사진기",24:"설탕 녹이는 단원 제목",27:"셋 중 용액이 아닌 것",29:"지구와 비슷한 크기의 행성",31:"나침반 역할을 하는 별",33:"고체에서 열이 이동하는 이유",35:"탐구 문제에 대한 예상 답",36:"사람이 없을 때 필요한 것",37:"태양에서 가장 먼 행성",38:"마시면 살고 마시지 않으면 죽는 것",40:"북쪽 하늘 별자리",41:"온도계가 나오는 단원 제목",42:"실험결과 해석 후 답",46:"열의 이동 줄이는 재료",48:"작은 생물 관찰 도구",49:"참을성 부족할 때 쓰는 말",51:"태양 주위를 도는 둥근 천체",53:"몸의 온도",55:"두 물질의 온도가 변하는 이유"};

Object.entries(across).forEach(([n,t])=>{
    const p=document.createElement('p');p.id=`q-${n}`;p.innerHTML=`<strong>${n}.</strong> ${t}`;
    document.getElementById('across').appendChild(p);
});
Object.entries(down).forEach(([n,t])=>{
    const p=document.createElement('p');p.id=`q-${n}`;p.innerHTML=`<strong>${n}.</strong> ${t}`;
    document.getElementById('down').appendChild(p);
});

/* ✅ 퍼즐 생성 */
const puzzle=document.getElementById('puzzle');
for(let r=0;r<23;r++){
    for(let c=0;c<17;c++){
        const cell=document.createElement('div');
        cell.classList.add('cell');
        if(pattern[r][c]==='o'){
            cell.classList.add('white');
            const input=document.createElement('input');
            input.maxLength=1;
            input.addEventListener('input',checkAnswers);
            cell.appendChild(input);
        }
        puzzle.appendChild(cell);
    }
}

/* ✅ 번호 표시 */
const printed=new Set();
coords.forEach(([num,row,col])=>{
    const idx=(row-1)*17+(col-1);
    const cell=puzzle.children[idx];
    if(cell && cell.classList.contains('white') && !printed.has(num)){
        const span=document.createElement('span');
        span.classList.add('number');
        span.textContent=num;
        cell.appendChild(span);
        printed.add(num);
    }
});

/* ✅ 정답 체크 */
let score=0;
const scoreDisplay=document.getElementById('score');
const solved=new Set();
function checkAnswers(){
    for(const [num,word] of Object.entries(answers)){
        const n=parseInt(num);
        const start=coords.find(([x])=>x===n);if(!start)continue;
        let [_,row,col]=start;let cells=[];
        const isAcross=Object.keys(across).includes(num);
        if(isAcross){
            for(let i=0;i<word.length;i++){
                const idx=(row-1)*17+(col-1+i);
                const input=puzzle.children[idx]?.querySelector('input');
                if(!input)continue;cells.push(input);
            }
        }else{
            for(let i=0;i<word.length;i++){
                const idx=(row-1+i)*17+(col-1);
                const input=puzzle.children[idx]?.querySelector('input');
                if(!input)continue;cells.push(input);
            }
        }
        if(cells.length!==word.length)continue;
        const guess=cells.map(x=>x.value.trim()).join('');
        if(guess===word && !solved.has(n)){
            solved.add(n);
            cells.forEach(c=>c.parentElement.classList.add('green'));
            document.getElementById(`q-${n}`).classList.add('solved');
            score+=100;scoreDisplay.textContent=score;
        }
    }
}
</script>
</body>
</html>